<!DOCTYPE html>
<html lang="zh-tw">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登入\登出系統</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <div id="loginForm">
        <h2>登入</h2>
        <input type="text" id="username" placeholder="請輸入帳號">
        <br>
        <input type="password" id="password" placeholder="請輸入密碼">
        <br>
        <button onclick="login()">登入帳號</button>
        <p id="errorMessage"></p>
    </div>
    <div id="welcomeSection">
        <h2 id="welcomeMessage"></h2>
        <button onclick="logout()">登出帳號</button>
    </div>
    <script>
        const defaultUser = {username:"melody", password:"123456"};
        window.onload = function(){
            const loggedInUser = localStorage.getItem("loggedInUser");
            loggedInUser? showWelcome(loggedInUser):showLoginForm();
        }
        //顯示給使用者輸入帳號密碼資訊的畫面，登入成功的畫面則先隱藏
        function showLoginForm(){
            document.getElementById("loginForm").style.display="block";
            document.getElementById("welcomeSection").style.display="none";
        }
        //登入成功，顯示歡迎登入的畫面
        function showWelcome(username){
            //要是引號`xxx` 而不是雙引號"xxx"!!!
            document.getElementById("welcomeMessage").innerText = `歡迎${username}`;
            //那輸入帳號密碼那個block就要隱藏起來
            document.getElementById("loginForm").style.display="none";
            document.getElementById("welcomeSection").style.display="block";
        }
        //登入功能，比對輸入之帳號密碼是否存在於後台中
        function login(){
            //先把user輸入的info抓出來
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;
            if(defaultUser.username === username && defaultUser.password === password){
                localStorage.setItem("loggedInUser", username);
                showWelcome(username);
            }else{
                document.getElementById("errorMessage").innerText = "帳號或密碼輸入錯誤";
            }
        }
        function logout(){
            localStorage.removeItem("loggedInUser");
            showLoginForm();
        }
    </script>
</body>
</html> 